#version 430 core

layout (local_size_x = 1, local_size_y = 1, local_size_z = 1) in;

layout(r32f, binding = 0) uniform image2D in_texture;
layout(r32f, binding = 1) uniform image2D out_texture;

layout(location = 0) uniform ivec2 u_Size;

void main()
{
	float biggest = -1.0;
	for (int y = 0; y < u_Size.y; ++y)
	{
		for (int x = 0; x < u_Size.x; ++x)
		{
			biggest = max(biggest, imageLoad(in_texture, ivec2(x, y)).r);
		}
	}
	imageStore(out_texture, ivec2(0,0), vec4(biggest,0.0,0.0,0.0));
}
